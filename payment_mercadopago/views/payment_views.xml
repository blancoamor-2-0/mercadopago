<?xml version="1.0" encoding="utf-8"?>
<odoo>
        <record id="acquirer_form_mercadopago" model="ir.ui.view">
            <field name="name">acquirer.form.mercadopago</field>
            <field name="model">payment.acquirer</field>
            <field name="inherit_id" ref="payment.acquirer_form"/>
            <field name="arch" type="xml">
                <xpath expr='//group[@name="acquirer"]' position='inside'>
                    <group attrs="{'invisible': [('provider', '!=', 'mercadopago')]}">
                        <field name="mercadopago_publishable_key" attrs="{'required': [('provider', '=', 'mercadopago'), ('state', '!=', 'disabled')]}"/>
                        <field name="mercadopago_access_token" password="True" attrs="{'required': [('provider', '=', 'mercadopago'), ('state', '!=', 'disabled')]}"/>
                        <field name="mercadopago_capture_method" attrs="{'invisible': [('payment_flow', '!=', 's2s')]}"/>
                        <field name="mercadopago_binary" attrs="{'invisible': [('payment_flow', '!=', 's2s')]}"/>
                    </group>
                </xpath>
                <xpath expr='//group[@name="acquirer"]' position='after'>
                    <p class="alert alert-info" role="alert" style="margin-bottom:0px;" attrs="{'invisible': [('provider', '!=', 'mercadopago')]}">
                        Podés obtener las credenciales de MercadoPago
                        <a colspan="2" href="https://www.mercadopago.com/mla/account/credentials" target="_blank">aquí</a>.
                        <br/>
                        Algunas observaciones sobre las credenciales y los entornos "habilitado" (producción) y "modo test" (test):
                        <ul>
                            <li>Las credenciales de producción sirven tanto para ambos entornos.</li>
                            <li>Las credenciales de test sirven solo para entorno de test.</li>
                            <li>Puede realizar pruebas en entorno test utilizando las tarjetas que figuran
                                <a colspan="2" href="https://www.mercadopago.com.ar/developers/es/guides/resources/localization/local-cards" target="_blank">
                                    aquí
                                </a>
                                con cualquier código de seguridad y una fecha de vencimiento futura.
                            </li>
                        </ul>
                    </p>
                    <t attrs="{'invisible': [('payment_flow', '!=', 's2s')]}">
                        <br/>
                        <p class="alert alert-info" role="alert" style="margin-bottom:0px;">
                            Algunas observaciones sobre cobros sin CVV para Suscripciones:
                            <br/>
                            <ul>
                                <li>Se debe solicitar a MercadoPago que habilite la cuenta para cobros sin CVV, para esto se le debe indicar el Application Id que se puede obtener desde
                                    <a colspan="2" href="https://www.mercadopago.com/mla/account/credentials" target="_blank">aquí</a>.
                                </li>
                                <li>Los cobros sin CVV solo funcionarán en entorno "habilitado" (producción).</li>
                            </ul>
                        </p>
                    </t>
                </xpath>
            </field>
        </record>
        <record id="action_info_from_mercadopago" model="ir.actions.server">
            <field name="name">Check in Mercadopago</field>
            <field name="model_id" ref="payment.model_payment_transaction"/>
            <field name="state">code</field>
            <field name="code">action = records.get_tx_info_from_mercadopago()</field>
            <field name="binding_model_id" ref="payment.model_payment_transaction"/>
            <field name="binding_type">action</field>
        </record>

</odoo>
